# Текстовый редактор Line

Простой текстовый редактор на C# с базовыми функциями редактирования текста.

## Как запустить

### Требования
- .NET 6.0 SDK
- Windows OS (из-за использования Windows Forms)

### Сборка и запуск

1. Клонируйте репозиторий:
   ```
   git clone <repository-url>
   ```

2. Перейдите в директорию проекта:
   ```
   cd line
   ```

3. Соберите проект:
   ```
   dotnet build
   ```

4. Запустите приложение:
   ```
   dotnet run
   ```

Или откройте решение `Line.sln` в Visual Studio и запустите через IDE.

## Как пользоваться

### Основные функции

1. **Создание нового документа**
   - Файл → Создать (Ctrl+N)
   - Откроется новое пустое окно редактора

2. **Открытие существующего файла**
   - Файл → Открыть (Ctrl+O)
   - Выберите текстовый файл в диалоговом окне

3. **Сохранение файла**
   - Файл → Сохранить (Ctrl+S) - сохраняет в текущий файл
   - Файл → Сохранить как - сохраняет в новый файл

4. **Отмена и повтор действий**
   - Правка → Отменить (Ctrl+Z) - отменяет последнее действие
   - Правка → Повторить (Ctrl+Y) - повторяет отмененное действие

5. **Поиск текста**
   - Правка → Найти (Ctrl+F)
   - Введите текст для поиска и нажмите "Найти далее"
   - Можно выбрать направление поиска и учитывать регистр

6. **Замена текста**
   - Правка → Заменить (Ctrl+H)
   - Введите текст для поиска и замену
   - Можно заменить одно вхождение или все вхождения

7. **Работа с буфером обмена**
   - Правка → Вырезать (Ctrl+X) - вырезает выделенный текст
   - Правка → Копировать (Ctrl+C) - копирует выделенный текст
   - Правка → Вставить (Ctrl+V) - вставляет текст из буфера обмена

8. **Настройка форматирования**
   - Формат → Шрифт - изменяет шрифт текста
   - Формат → Цвет - изменяет цвет текста

9. **Автосохранение**
   - Приложение автоматически сохраняет изменения каждые 5 минут

## Архитектура проекта

### Общая структура

```
Line/
├── Controllers/
│   └── MainController.cs      # Основной контроллер приложения
├── Models/
│   └── TextDocument.cs        # Модель текстового документа
├── Views/
│   ├── MainForm.cs            # Главная форма приложения
│   ├── MainForm.Designer.cs   # Дизайн главной формы
│   ├── FindForm.cs            # Форма поиска текста
│   └── ReplaceForm.cs         # Форма замены текста
├── Program.cs                 # Точка входа в приложение
└── Line.csproj                # Файл проекта
```

### Компоненты

#### Models/TextDocument.cs
Модель данных, представляющая текстовый документ:
- Хранит путь к файлу, содержимое и состояние модификации
- Реализует операции открытия, сохранения файлов
- Содержит методы поиска и замены текста

#### Controllers/MainController.cs
Контроллер, управляющий бизнес-логикой приложения:
- Управляет коллекцией открытых документов
- Обрабатывает операции создания, открытия, сохранения документов
- Реализует функции поиска и замены
- Управляет автосохранением
- Генерирует события для уведомления представлений об изменениях

#### Views/MainForm.cs
Главное окно приложения:
- Предоставляет пользовательский интерфейс
- Содержит текстовое поле для редактирования
- Реализует обработчики меню и команд
- Подписывается на события контроллера
- Управляет таймером автосохранения

#### Views/FindForm.cs и Views/ReplaceForm.cs
Диалоговые окна для поиска и замены текста:
- Предоставляют интерфейс для ввода параметров поиска
- Взаимодействуют с контроллером для выполнения операций

### Паттерны проектирования

1. **MVC (Model-View-Controller)**
   - Model: TextDocument
   - View: MainForm, FindForm, ReplaceForm
   - Controller: MainController

2. **Observer (Наблюдатель)**
   - Используются события для связи между контроллером и представлениями
   - MainForm подписывается на события DocumentChanged, DocumentOpened, DocumentSaved

3. **Singleton**
   - MainController создается один раз в Program.cs и используется всем приложением

### Особенности реализации

1. **Автосохранение**
   - Реализовано с помощью Timer, который вызывает метод AutoSave контроллера каждые 5 минут
   - Сохраняются только измененные документы, у которых задан путь к файлу

2. **Обработка ошибок**
   - Все операции работы с файлами обернуты в try/catch блоки
   - Пользователю отображаются понятные сообщения об ошибках

3. **Подтверждение действий**
   - При попытке закрыть измененный документ запрашивается подтверждение
   - При создании нового или открытии другого файла также запрашивается подтверждение сохранения

4. **Состояние документа**
   - Отслеживается состояние модификации документа
   - В заголовке окна отображается "*" для измененных документов
